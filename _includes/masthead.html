{% capture logo_path %}{{ site.logo }}{% endcapture %}

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-logo" href="{{ '/' | relative_url }}">
          <img src="{{ '/assets/images/logo/wave_form_transparent.svg' | relative_url }}" alt="EL EL EM Logo">
        </a>
        <a class="site-title" href="{{ '/' | relative_url }}">
          {{ site.masthead_title | default: site.title }}
          {% if site.subtitle %}<span class="site-subtitle">{{ site.subtitle }}</span>{% endif %}
        </a>
        
        <!-- Desktop Navigation -->
        <div class="desktop-nav">
          <a href="/workshops/" class="nav-item workshops-item">
            <i class="fas fa-globe"></i> Workshops
          </a>
          <a href="/about/" class="nav-item">About</a>
          <a href="https://theepochtour.ai" class="nav-item">The Epoch Tour</a>
        </div>
        
        <!-- Mobile Hamburger -->
        <button class="mobile-toggle" type="button">
          <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </button>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobile-menu">
          <a href="/workshops/">Workshops</a>
          <a href="/about/">About</a>
          <a href="https://theepochtour.ai">The Epoch Tour</a>
        </div>
      </nav>
    </div>
  </div>
</div>

<style>
.masthead__inner-wrap {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.masthead__menu {
  display: flex;
  align-items: center;
  width: 100%;
}

.greedy-nav {
  display: flex !important;
  width: 100% !important;
  align-items: center;
}

.site-logo {
  display: inline-block;
  margin-right: 15px;
  vertical-align: middle;
}

.site-logo img {
  height: 40px;
  width: auto;
  vertical-align: middle;
}

.site-title {
  vertical-align: middle;
  display: inline-block;
}

.site-title .site-subtitle {
  font-size: 0.7em;
  color: #666;
  display: block;
  margin-top: -5px;
}

/* Desktop Navigation */
.desktop-nav {
  display: flex;
  align-items: center;
  margin-left: auto;
  gap: 20px;
}

.nav-item {
  color: #333;
  text-decoration: none;
  padding: 8px 12px;
  border-radius: 4px;
  transition: background 0.3s;
}

.nav-item:hover {
  background: #f5f5f5;
  color: #333;
  text-decoration: none;
}

.workshops-item {
  background: #809AFF;
  color: white !important;
  border-radius: 20px;
  padding: 8px 15px;
}

.workshops-item:hover {
  background: #6A85FF !important;
  color: white !important;
}

/* Mobile Toggle */
.mobile-toggle {
  display: none;
  background: #809AFF;
  border: none;
  padding: 8px;
  border-radius: 4px;
  margin-left: auto;
  cursor: pointer;
}

.hamburger {
  width: 20px;
  height: 16px;
  position: relative;
}

.hamburger span {
  display: block;
  height: 2px;
  width: 100%;
  background: white;
  margin-bottom: 4px;
  transition: 0.3s;
}

.hamburger span:last-child {
  margin-bottom: 0;
}

/* Mobile Menu */
.mobile-menu {
  display: none;
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  min-width: 200px;
  z-index: 1000;
  flex-direction: column;
}

.mobile-menu a {
  display: block;
  padding: 12px 16px;
  color: #333;
  text-decoration: none;
  border-bottom: 1px solid #eee;
}

.mobile-menu a:last-child {
  border-bottom: none;
}

.mobile-menu a:hover {
  background: #f5f5f5;
}

/* Mobile Styles */
@media (max-width: 1024px) {
  .desktop-nav {
    display: none;
  }
  
  .mobile-toggle {
    display: block;
  }
  
  .site-logo img {
    height: 32px;
  }
  
  .site-logo {
    margin-right: 10px;
  }
}

/* Desktop Styles */
@media (min-width: 1025px) {
  .mobile-toggle {
    display: none;
  }
  
  .mobile-menu {
    display: none !important;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const toggle = document.querySelector('.mobile-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  
  if (toggle && mobileMenu) {
    toggle.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      if (mobileMenu.style.display === 'flex') {
        mobileMenu.style.display = 'none';
      } else {
        mobileMenu.style.display = 'flex';
      }
    });
    
    // Close menu when clicking outside
    document.addEventListener('click', function(e) {
      if (!toggle.contains(e.target) && !mobileMenu.contains(e.target)) {
        mobileMenu.style.display = 'none';
      }
    });
  }
});
</script>